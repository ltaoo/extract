{"version":3,"sources":["webpack:///static/js/app.a48b894bdc8ef59d00ac.js","webpack:///./src/main.js","webpack:///./src/utils/createDownloadUrl.js","webpack:///./src/utils/getCurrentTabUrl.js","webpack:///./src/utils/handleFileName.js","webpack:///./src/utils/index.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","renderStatus","statusText","document","getElementById","textContent","_utils","_utils2","addEventListener","getCurrentTabUrl","then","title","url","content","a","createDownloadUrl","handleFileName","innerHTML","container","appendChild","catch","err","32","fileName","createElement","blob","Blob","download","href","URL","createObjectURL","className","Object","defineProperty","value","33","flag","_promise2","resolve","reject","queryInfo","active","currentWindow","chrome","tabs","query","tab","console","assert","_promise","34","reg","replace","35","_getCurrentTabUrl","_getCurrentTabUrl2","_createDownloadUrl","_createDownloadUrl2","_handleFileName","_handleFileName2","70"],"mappings":"AAAAA,cAAc,EAAE,IAEVC,EACA,SAASC,EAAQC,EAASC,GAE/B,YAQA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GCRxF,QAASG,GAAaC,GACpBC,SAASC,eAAe,OAAOC,YAAcH,EAL/C,GAAAI,GAAAV,EAAA,IDQKW,EAAUV,EAAuBS,ECNtCV,GAAA,IAOAO,SAASK,iBAAiB,mBAAoB,WAC5CD,EAAAP,QAAIS,mBACDC,KAAK,SAAAZ,GAAO,GACJa,GAAcb,EAAda,MAAOC,EAAOd,EAAPc,GACdX,iCAA2CW,EAA3C,OAEA,IAAMC,OAAcF,EAAd,KAAwBC,EAAxB,IAGAE,EAAIP,EAAAP,QAAIe,kBAAkBR,EAAAP,QAAIgB,eAAeL,GAAQE,EAE3DC,GAAEG,UAAYV,EAAAP,QAAIgB,eAAeL,EAEjC,IAAMO,GAAYf,SAASC,eAAe,MAC1Cc,GAAUD,UAAY,GACtBC,EAAUC,YAAYL,KAEvBM,MAAM,SAAAC,GACLpB,EAAaoB,QDcbC,GACA,SAAS5B,EAAQC,GAEtB,YE7Cc,SAASoB,GAAkBQ,EAAUV,GAClD,GAAMC,GAAIX,SAASqB,cAAc,KAC3BC,EAAO,GAAIC,OAAMb,GAUvB,OAPAC,GAAEa,SAAWJ,EACbT,EAAEc,KAAOC,IAAIC,gBAAgBL,GAC7BX,EAAEiB,UAAY,mBACdjB,EAAEG,UAAY,aAIPH,EFmCRkB,OAAOC,eAAetC,EAAS,cAC7BuC,OAAO,IAETvC,EAAQK,QElDee,GFiElBoB,GACA,SAASzC,EAAQC,EAASC,GAE/B,YAYA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GGhFzE,QAASW,GAAiB2B,GAGvC,MAAO,IAAAC,GAAArC,QAAY,SAACsC,EAASC,GACxBH,GAEDE,GAAS3B,MAAO,OAAQC,IAAK,wBAE/B,IAAM4B,IACJC,QAAQ,EACRC,eAAe,EAGjBC,QAAOC,KAAKC,MAAML,EAAW,SAACI,GAM5B,GAAME,GAAMF,EAAK,GAIXhC,EAAMkC,EAAIlC,IACVD,EAAQmC,EAAInC,KAMlBoC,SAAQC,OAAqB,gBAAPpC,GAAiB,8BACvC0B,GACE3B,QACAC,YHqCPoB,OAAOC,eAAetC,EAAS,cAC7BuC,OAAO,GAGT,IAAIe,GAAWrD,EAAoB,IAE/ByC,EAAYxC,EAAuBoD,EAEvCtD,GAAQK,QG9EeS,GH6GlByC,GACA,SAASxD,EAAQC,GAEtB,YIhHc,SAASqB,GAAeL,GAEtC,GAAMwC,GAAM,sBAGZ,OADAxC,GAAQA,EAAMyC,QAAQD,EAAK,KACpBxC,GAAS,MJ6GhBqB,OAAOC,eAAetC,EAAS,cAC9BuC,OAAO,IAERvC,EAAQK,QIrHegB,GJ+HlBqC,GACA,SAAS3D,EAAQC,EAASC,GAE/B,YAkBA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAhBvFkC,OAAOC,eAAetC,EAAS,cAC9BuC,OAAO,GKrIT,IAAAoB,GAAA1D,EAAA,IL0IK2D,EAAqB1D,EAAuByD,GKzIjDE,EAAA5D,EAAA,IL6IK6D,EAAsB5D,EAAuB2D,GK5IlDE,EAAA9D,EAAA,ILgJK+D,EAAmB9D,EAAuB6D,EAI9C/D,GAAQK,SKjJRS,2BACAM,4BACAC,2BLuJK4C,GACA,SAASlE,EAAQC","file":"static/js/app.a48b894bdc8ef59d00ac.js","sourcesContent":["webpackJsonp([2,0],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _utils = __webpack_require__(35);\n\t\n\tvar _utils2 = _interopRequireDefault(_utils);\n\t\n\t__webpack_require__(70);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction renderStatus(statusText) {\n\t  document.getElementById('app').textContent = statusText;\n\t}\n\t\n\tdocument.addEventListener('DOMContentLoaded', function () {\n\t  _utils2.default.getCurrentTabUrl().then(function (obj) {\n\t    var title = obj.title,\n\t        url = obj.url;\n\t\n\t    renderStatus('Performing create file for ' + url + ' ...');\n\t\n\t    var content = '[' + title + '](' + url + ')';\n\t\n\t    var a = _utils2.default.createDownloadUrl(_utils2.default.handleFileName(title), content);\n\t\n\t    a.innerHTML = _utils2.default.handleFileName(title);\n\t\n\t    var container = document.getElementById('app');\n\t    container.innerHTML = \"\";\n\t    container.appendChild(a);\n\t  }).catch(function (err) {\n\t    renderStatus(err);\n\t  });\n\t});\n\n/***/ },\n\n/***/ 32:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = createDownloadUrl;\n\tfunction createDownloadUrl(fileName, content) {\n\t  var a = document.createElement('a');\n\t  var blob = new Blob([content]);\n\t\n\t  a.download = fileName;\n\t  a.href = URL.createObjectURL(blob);\n\t  a.className = \"download__source\";\n\t  a.innerHTML = '点击下载或右键另存为';\n\t\n\t  return a;\n\t}\n\n/***/ },\n\n/***/ 33:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _promise = __webpack_require__(36);\n\t\n\tvar _promise2 = _interopRequireDefault(_promise);\n\t\n\texports.default = getCurrentTabUrl;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getCurrentTabUrl(flag) {\n\t  return new _promise2.default(function (resolve, reject) {\n\t    if (flag) {\n\t      resolve({ title: 'test', url: 'http://www.baidu.com' });\n\t    }\n\t    var queryInfo = {\n\t      active: true,\n\t      currentWindow: true\n\t    };\n\t\n\t    chrome.tabs.query(queryInfo, function (tabs) {\n\t      var tab = tabs[0];\n\t\n\t      var url = tab.url;\n\t      var title = tab.title;\n\t\n\t      console.assert(typeof url == 'string', 'tab.url should be a string');\n\t      resolve({\n\t        title: title,\n\t        url: url\n\t      });\n\t    });\n\t  });\n\t}\n\n/***/ },\n\n/***/ 34:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = handleFileName;\n\tfunction handleFileName(title) {\n\t\tvar reg = /[\\\\\\/\\*\\?\\|\\<\\>\\:]+/g;\n\t\n\t\ttitle = title.replace(reg, '_');\n\t\treturn title += '.md';\n\t}\n\n/***/ },\n\n/***/ 35:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _getCurrentTabUrl = __webpack_require__(33);\n\t\n\tvar _getCurrentTabUrl2 = _interopRequireDefault(_getCurrentTabUrl);\n\t\n\tvar _createDownloadUrl = __webpack_require__(32);\n\t\n\tvar _createDownloadUrl2 = _interopRequireDefault(_createDownloadUrl);\n\t\n\tvar _handleFileName = __webpack_require__(34);\n\t\n\tvar _handleFileName2 = _interopRequireDefault(_handleFileName);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t\tgetCurrentTabUrl: _getCurrentTabUrl2.default,\n\t\tcreateDownloadUrl: _createDownloadUrl2.default,\n\t\thandleFileName: _handleFileName2.default\n\t};\n\n/***/ },\n\n/***/ 70:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/app.a48b894bdc8ef59d00ac.js","// import { getCurrentTabUrl, createDownloadUrl, handleFileName }  from './utils/index'\r\nimport lib from './utils'\r\n// 样式\r\nimport './styles/main.css'\r\n\r\nfunction renderStatus(statusText) {\r\n  document.getElementById('app').textContent = statusText\r\n}\r\n\r\n// 当 dom 加载成功后执行\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  lib.getCurrentTabUrl()\r\n    .then(obj => {\r\n      const {title, url} = obj\r\n      renderStatus(`Performing create file for ${url} ...`)\r\n      // 内容\r\n      const content = `[${title}](${url})`\r\n      // 先实现生成文件\r\n      // 创建 a 标签\r\n      const a = lib.createDownloadUrl(lib.handleFileName(title), content)\r\n      // 将标题作为 a 链接的文字\r\n      a.innerHTML = lib.handleFileName(title)\r\n      // 将生成的 a 标签放入页面中\r\n      const container = document.getElementById('app')\r\n      container.innerHTML = \"\"\r\n      container.appendChild(a)\r\n    })\r\n    .catch(err => {\r\n      renderStatus(err)\r\n    })\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","export default function createDownloadUrl(fileName, content) {\r\n  const a = document.createElement('a')\r\n  const blob = new Blob([content])\r\n  // var evt = document.createEvent(\"MouseEvents\");\r\n  // evt.initEvent(\"click\", false, false);//initEvent 不加后两个参数在FF下会报错, 感谢 Barret Lee 的反馈\r\n  a.download = fileName\r\n  a.href = URL.createObjectURL(blob)\r\n  a.className = \"download__source\"\r\n  a.innerHTML = '点击下载或右键另存为'\r\n  // aLink.dispatchEvent(evt);\r\n  // var status = document.getElementById('status');\r\n  // status.appendChild(aLink);\r\n  return a\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/createDownloadUrl.js","export default function getCurrentTabUrl(flag) {\r\n  // Query filter to be passed to chrome.tabs.query - see\r\n  // https://developer.chrome.com/extensions/tabs#method-query\r\n  return new Promise((resolve, reject) => {\r\n    if(flag) {\r\n      // 如果是在网页中测试\r\n      resolve({title: 'test', url: 'http://www.baidu.com'})\r\n    }\r\n    const queryInfo = {\r\n      active: true,\r\n      currentWindow: true\r\n    }\r\n\r\n    chrome.tabs.query(queryInfo, (tabs) => {\r\n      // chrome.tabs.query invokes the callback with a list of tabs that match the\r\n      // query. When the popup is opened, there is certainly a window and at least\r\n      // one tab, so we can safely assume that |tabs| is a non-empty array.\r\n      // A window can only have one active tab at a time, so the array consists of\r\n      // exactly one tab.\r\n      const tab = tabs[0]\r\n\r\n      // A tab is a plain object that provides information about the tab.\r\n      // See https://developer.chrome.com/extensions/tabs#type-Tab\r\n      const url = tab.url\r\n      const title = tab.title\r\n\r\n      // tab.url is only available if the \"activeTab\" permission is declared.\r\n      // If you want to see the URL of other tabs (e.g. after removing active:true\r\n      // from |queryInfo|), then the \"tabs\" permission is required to see their\r\n      // \"url\" properties.\r\n      console.assert(typeof url == 'string', 'tab.url should be a string')\r\n      resolve({\r\n        title,\r\n        url\r\n      })\r\n      // callback(title, url)\r\n    })\r\n    // Most methods of the Chrome extension APIs are asynchronous. This means that\r\n    // you CANNOT do something like this:\r\n    //\r\n    // const url;\r\n    // chrome.tabs.query(queryInfo, function(tabs) {\r\n    //   url = tabs[0].url;\r\n    // });\r\n    // alert(url); // Shows \"undefined\", because chrome.tabs.query is async.\r\n  })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/getCurrentTabUrl.js","export default function handleFileName(title) {\r\n\t// 文件名不能包含这些字符 \\/：*？“<>|\r\n\tconst reg = /[\\\\\\/\\*\\?\\|\\<\\>\\:]+/g\r\n\t// 将不能包含的字符替换为 _\r\n\ttitle = title.replace(reg, '_')\r\n\treturn title += '.md'\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/handleFileName.js","import getCurrentTabUrl from './getCurrentTabUrl'\r\nimport createDownloadUrl from './createDownloadUrl'\r\nimport handleFileName from './handleFileName'\r\n\r\nexport default {\r\n\tgetCurrentTabUrl,\r\n\tcreateDownloadUrl,\r\n\thandleFileName\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js"],"sourceRoot":""}